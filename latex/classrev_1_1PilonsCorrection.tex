\hypertarget{classrev_1_1PilonsCorrection}{}\doxysection{rev\+::Pilons\+Correction Class Reference}
\label{classrev_1_1PilonsCorrection}\index{rev::PilonsCorrection@{rev::PilonsCorrection}}


Implements the Pi\+Lons \mbox{\hyperlink{classrev_1_1Correction}{Correction}} Algorithm used by team 5225A in V\+RC In The Zone.  




{\ttfamily \#include $<$pilons\+\_\+correction.\+hh$>$}



Inheritance diagram for rev\+::Pilons\+Correction\+:
% FIG 0


Collaboration diagram for rev\+::Pilons\+Correction\+:
% FIG 1
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::tuple$<$ double, double $>$ \mbox{\hyperlink{classrev_1_1PilonsCorrection_a47853c664579927a110396266e30cae0}{apply\+\_\+correction}} (\mbox{\hyperlink{structrev_1_1OdometryState}{Odometry\+State}} current\+\_\+state, \mbox{\hyperlink{structrev_1_1Position}{Position}} target\+\_\+state, std\+::tuple$<$ double, double $>$ powers) override
\begin{DoxyCompactList}\small\item\em Applies correction to the input. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classrev_1_1PilonsCorrection_a2d0cd0b75926395ba73c3680787c64f3}{Pilons\+Correction}} (double ik\+\_\+correction, Length imax\+\_\+error)
\begin{DoxyCompactList}\small\item\em Construct a new Pilons \mbox{\hyperlink{classrev_1_1Correction}{Correction}} object. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implements the Pi\+Lons \mbox{\hyperlink{classrev_1_1Correction}{Correction}} Algorithm used by team 5225A in V\+RC In The Zone. 

Pi\+Lons correction follows the following\+:


\begin{DoxyEnumerate}
\item Find the distance from the target position to the nearest point on the line the robot is currently following. Save this as {\ttfamily xerr}
\item Calculate the global angle from where the robot is to the target point
\item Find the difference in the angle the robot is facing to the angle the robot needs to face to be facing towards the target point. This should be the minimum angle needed. Call this {\ttfamily angle}.
\item If {\ttfamily xerr} is greater than the maximum allowable {\ttfamily xerr}, {\ttfamily correction = k}
\end{DoxyEnumerate}

{\ttfamily angle}
\begin{DoxyEnumerate}
\item If {\ttfamily correction == 0}, skip correcting. If {\ttfamily correction $>$ 0}, multiply the right power by {\ttfamily exp(-\/correction)}. If {\ttfamily correction $<$ 0}, multiply left power by {\ttfamily exp(correction)} 
\end{DoxyEnumerate}

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classrev_1_1PilonsCorrection_a2d0cd0b75926395ba73c3680787c64f3}\label{classrev_1_1PilonsCorrection_a2d0cd0b75926395ba73c3680787c64f3}} 
\index{rev::PilonsCorrection@{rev::PilonsCorrection}!PilonsCorrection@{PilonsCorrection}}
\index{PilonsCorrection@{PilonsCorrection}!rev::PilonsCorrection@{rev::PilonsCorrection}}
\doxysubsubsection{\texorpdfstring{PilonsCorrection()}{PilonsCorrection()}}
{\footnotesize\ttfamily rev\+::\+Pilons\+Correction\+::\+Pilons\+Correction (\begin{DoxyParamCaption}\item[{double}]{ik\+\_\+correction,  }\item[{Length}]{imax\+\_\+error }\end{DoxyParamCaption})}



Construct a new Pilons \mbox{\hyperlink{classrev_1_1Correction}{Correction}} object. 


\begin{DoxyParams}{Parameters}
{\em ik\+Correction} & The constant of correction. {\ttfamily 8.\+0} was used by Pilons, but tuning is recommended. \\
\hline
{\em imax\+Error} & The error threshold over which correction will be applied \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classrev_1_1PilonsCorrection_a47853c664579927a110396266e30cae0}\label{classrev_1_1PilonsCorrection_a47853c664579927a110396266e30cae0}} 
\index{rev::PilonsCorrection@{rev::PilonsCorrection}!apply\_correction@{apply\_correction}}
\index{apply\_correction@{apply\_correction}!rev::PilonsCorrection@{rev::PilonsCorrection}}
\doxysubsubsection{\texorpdfstring{apply\_correction()}{apply\_correction()}}
{\footnotesize\ttfamily std\+::tuple$<$ double, double $>$ rev\+::\+Pilons\+Correction\+::apply\+\_\+correction (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structrev_1_1OdometryState}{rev\+::\+Odometry\+State}}}]{current\+\_\+state,  }\item[{\mbox{\hyperlink{structrev_1_1Position}{rev\+::\+Position}}}]{target\+\_\+state,  }\item[{std\+::tuple$<$ double, double $>$}]{powers }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Applies correction to the input. 


\begin{DoxyParams}{Parameters}
{\em current\+\_\+state} & The current \mbox{\hyperlink{structrev_1_1OdometryState}{Odometry\+State}} \\
\hline
{\em target\+\_\+state} & The position being targeted \\
\hline
{\em powers} & The input powers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
std\+::tuple$<$double, double$>$ The adjusted powers 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classrev_1_1Correction_affad674eea4a06b05cb4dd046c80fa29}{rev\+::\+Correction}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/rev/api/alg/drive/correction/pilons\+\_\+correction.\+hh\item 
src/api/alg/drive/correction/pilons\+\_\+correction.\+cc\end{DoxyCompactItemize}
